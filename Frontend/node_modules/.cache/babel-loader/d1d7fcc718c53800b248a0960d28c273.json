{"ast":null,"code":"var _jsxFileName = \"C:\\\\MERN test\\\\submission test\\\\This Is what im submitting\\\\Frontend\\\\src\\\\ParkingManagement\\\\components\\\\ParkingLot.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\nimport Draggable from \"react-draggable\"; // The default\n\nimport useGlobalContext from \"ParkingManagement/context\";\nimport { FiEdit } from \"react-icons/fi\";\nimport { GrClose } from \"react-icons/gr\";\nimport { FaTrashAlt } from \"react-icons/fa\";\nimport { GiGate } from \"react-icons/gi\";\nimport ParkModal from \"./ParkModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ParkingLot() {\n  _s();\n\n  const {\n    ParkingSlots,\n    Entrances,\n    Editing,\n    ForManaging,\n    Notification,\n    Exited\n  } = useGlobalContext();\n  const [, setForManaging] = ForManaging;\n  const [exited, setExited] = Exited;\n  const [parkingSlots, setParkingSlots] = ParkingSlots;\n  const [entrances, setEntrances] = Entrances;\n  const [editing, setEditing] = Editing;\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isParking, setIsParking] = useState(false);\n  const [selectedGate, setSelectedGate] = useState(false);\n  const [, setNotification] = Notification;\n  const entrancesRef = useRef([]);\n  const parkingSlotsRef = useRef([]);\n  const [car, setCar] = useState({\n    size: \"small\"\n  });\n\n  const handlePark = e => {\n    e.preventDefault();\n    const exitedVehicles = exited.map(e => e.plate);\n    /* ------------------------- CHECK IF ALREADY PARKED ------------------------ */\n\n    const isParkedAlready = parkingSlots.map(p => p.occupied).includes(car === null || car === void 0 ? void 0 : car.plateNumber);\n    if (isParkedAlready) return setNotification({\n      message: `${car === null || car === void 0 ? void 0 : car.plateNumber} is parked already`,\n      color: \"red\"\n    });\n    /* -------------------- CHECK IF THERE IS AVAILABLE SLOT -------------------- */\n\n    const Available = size => {\n      const available = parkingSlots.filter(F => F.size === size && !F.occupied);\n      return available.length > 0 ? available : false;\n    };\n\n    const availableSlots = {\n      small: Available(\"small\") || Available(\"medium\"),\n      medium: Available(\"medium\") || Available(\"large\"),\n      large: Available(\"large\")\n    };\n    if (!availableSlots[car.size]) return setNotification({\n      message: \"no available parking\",\n      color: \"red\"\n    });\n    /* ---------------------------- GET CLOSEST SLOT ---------------------------- */\n\n    /* -------------------------------- PARK CAR -------------------------------- */\n\n    const returner = exitedVehicles.includes(car === null || car === void 0 ? void 0 : car.plateNumber);\n    setParkingSlots(parkingSlots.map(p => p.id === id ? { ...p,\n      occupied: car === null || car === void 0 ? void 0 : car.plateNumber,\n      entry: new Date(),\n      returner\n    } : p));\n    handleCloseModal();\n    /* ------------------ CHECK IF CAR RETURNED WITHIN AN HOUR ------------------ */\n\n    if (returner) {\n      setExited(exited.filter(e => e.plate !== (car === null || car === void 0 ? void 0 : car.plateNumber)));\n      return setNotification({\n        message: `${car === null || car === void 0 ? void 0 : car.plateNumber} returned within 1 hour !!`,\n        color: \"green\"\n      });\n    }\n  };\n\n  const handleCloseModal = () => {\n    setIsParking(false);\n    setNotification({});\n    setCar({\n      size: \"small\"\n    });\n    setSelectedGate(false);\n  };\n\n  const updatePosition = (arr, id, ref) => {\n    if (isDeleting) return arr.filter(A => A.id !== id);\n    return arr.map(A => A.id === id ? { ...A,\n      defaultPosition: {\n        x: ref === null || ref === void 0 ? void 0 : ref.state.x,\n        y: ref === null || ref === void 0 ? void 0 : ref.state.y\n      }\n    } : A);\n  };\n\n  const handleParking = i => {\n    setIsParking(true);\n    setForManaging({});\n    setSelectedGate(entrancesRef.current[i].state);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `text-5xl ${isParking && \"filter blur-sm\"} z-50`,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        title: \"EDIT\",\n        className: \"fixed text-4xl m-3 cursor-pointer z-50\",\n        onClick: () => setEditing(!editing),\n        children: editing ? /*#__PURE__*/_jsxDEV(GrClose, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 22\n        }, this) : /*#__PURE__*/_jsxDEV(FiEdit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: /*#__PURE__*/_jsxDEV(FaTrashAlt, {\n          className: `${!editing && \"opacity-0 pointer-events-none\"} duration-500 fixed right-0 bottom-0 text-4xl m-5 text-red-400  z-50 cursor-pointer transform hover:scale-125`,\n          onMouseOver: () => setIsDeleting(true),\n          onMouseLeave: () => setIsDeleting(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), entrances.map((entrance, i) => /*#__PURE__*/_jsxDEV(Draggable, {\n        ref: el => {\n          entrancesRef.current[i] = el;\n        },\n        disabled: !editing,\n        defaultPosition: entrance.defaultPosition,\n        onStop: () => setEntrances(updatePosition(entrances, entrance.id, entrancesRef.current[i])),\n        children: /*#__PURE__*/_jsxDEV(GiGate, {\n          title: \"ENTRANCE\",\n          onClick: () => !editing ? handleParking(i) : null,\n          className: `text-green-400 absolute ${editing ? \"cursor-move\" : \"cursor-pointer\"}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)\n      }, entrance.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this)), parkingSlots.map((slot, i) => {\n        var _slot$size;\n\n        return /*#__PURE__*/_jsxDEV(Draggable, {\n          ref: el => {\n            parkingSlotsRef.current[i] = el;\n          },\n          disabled: !editing,\n          defaultPosition: slot.defaultPosition,\n          onStop: el => setParkingSlots(updatePosition(parkingSlots, slot.id, parkingSlotsRef.current[i])),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            title: `${slot.size} parking`,\n            onClick: () => slot.occupied && !editing ? setForManaging({\n              open: true,\n              content: slot\n            }) : null,\n            className: `${slot.occupied && \"bg-green-300 cursor-pointer\"} ${editing && \"cursor-move\"}  h-12 w-12 border-2 border-yellow-200 grid place-content-center absolute text-2xl`,\n            children: (_slot$size = slot.size) === null || _slot$size === void 0 ? void 0 : _slot$size.charAt(0).toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)\n        }, slot.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), isParking && /*#__PURE__*/_jsxDEV(ParkModal, {\n      park: handlePark,\n      closeModal: handleCloseModal,\n      car: car,\n      setCar: setCar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ParkingLot, \"IFUns9ogKi8HGObCsPWoNHJKn44=\", false, function () {\n  return [useGlobalContext];\n});\n\n_c = ParkingLot;\n\nvar _c;\n\n$RefreshReg$(_c, \"ParkingLot\");","map":{"version":3,"sources":["C:/MERN test/submission test/This Is what im submitting/Frontend/src/ParkingManagement/components/ParkingLot.js"],"names":["React","useRef","useState","Draggable","useGlobalContext","FiEdit","GrClose","FaTrashAlt","GiGate","ParkModal","ParkingLot","ParkingSlots","Entrances","Editing","ForManaging","Notification","Exited","setForManaging","exited","setExited","parkingSlots","setParkingSlots","entrances","setEntrances","editing","setEditing","isDeleting","setIsDeleting","isParking","setIsParking","selectedGate","setSelectedGate","setNotification","entrancesRef","parkingSlotsRef","car","setCar","size","handlePark","e","preventDefault","exitedVehicles","map","plate","isParkedAlready","p","occupied","includes","plateNumber","message","color","Available","available","filter","F","length","availableSlots","small","medium","large","returner","id","entry","Date","handleCloseModal","updatePosition","arr","ref","A","defaultPosition","x","state","y","handleParking","i","current","entrance","el","slot","open","content","charAt","toUpperCase"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport Draggable from \"react-draggable\"; // The default\nimport useGlobalContext from \"ParkingManagement/context\";\nimport { FiEdit } from \"react-icons/fi\";\nimport { GrClose } from \"react-icons/gr\";\nimport { FaTrashAlt } from \"react-icons/fa\";\nimport { GiGate } from \"react-icons/gi\";\nimport ParkModal from \"./ParkModal\";\n\nexport default function ParkingLot() {\n  const {\n    ParkingSlots,\n    Entrances,\n    Editing,\n    ForManaging,\n    Notification,\n    Exited,\n  } = useGlobalContext();\n  const [, setForManaging] = ForManaging;\n  const [exited, setExited] = Exited;\n  const [parkingSlots, setParkingSlots] = ParkingSlots;\n  const [entrances, setEntrances] = Entrances;\n  const [editing, setEditing] = Editing;\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isParking, setIsParking] = useState(false);\n  const [selectedGate, setSelectedGate] = useState(false);\n  const [, setNotification] = Notification;\n  const entrancesRef = useRef([]);\n  const parkingSlotsRef = useRef([]);\n  const [car, setCar] = useState({ size: \"small\" });\n\n  const handlePark = (e) => {\n    e.preventDefault();\n    const exitedVehicles = exited.map((e) => e.plate);\n\n    /* ------------------------- CHECK IF ALREADY PARKED ------------------------ */\n    const isParkedAlready = parkingSlots\n      .map((p) => p.occupied)\n      .includes(car?.plateNumber);\n    if (isParkedAlready)\n      return setNotification({\n        message: `${car?.plateNumber} is parked already`,\n        color: \"red\",\n      });\n\n    /* -------------------- CHECK IF THERE IS AVAILABLE SLOT -------------------- */\n\n    const Available = (size) => {\n      const available = parkingSlots.filter(\n        (F) => F.size === size && !F.occupied\n      );\n      return available.length > 0 ? available : false;\n    };\n\n    const availableSlots = {\n      small: Available(\"small\") || Available(\"medium\"),\n      medium: Available(\"medium\") || Available(\"large\"),\n      large: Available(\"large\"),\n    };\n\n    if (!availableSlots[car.size])\n      return setNotification({\n        message: \"no available parking\",\n        color: \"red\",\n      });\n\n    /* ---------------------------- GET CLOSEST SLOT ---------------------------- */\n\n\n    /* -------------------------------- PARK CAR -------------------------------- */\n\n    const returner = exitedVehicles.includes(car?.plateNumber);\n\n    setParkingSlots(\n      parkingSlots.map((p) =>\n        p.id === id\n          ? { ...p, occupied: car?.plateNumber, entry: new Date(), returner }\n          : p\n      )\n    );\n\n    handleCloseModal();\n\n    /* ------------------ CHECK IF CAR RETURNED WITHIN AN HOUR ------------------ */\n\n    if (returner) {\n      setExited(exited.filter((e) => e.plate !== car?.plateNumber));\n      return setNotification({\n        message: `${car?.plateNumber} returned within 1 hour !!`,\n        color: \"green\",\n      });\n    }\n  };\n\n  const handleCloseModal = () => {\n    setIsParking(false);\n    setNotification({});\n    setCar({ size: \"small\" });\n    setSelectedGate(false);\n  };\n\n  const updatePosition = (arr, id, ref) => {\n    if (isDeleting) return arr.filter((A) => A.id !== id);\n    return arr.map((A) =>\n      A.id === id\n        ? {\n            ...A,\n            defaultPosition: { x: ref?.state.x, y: ref?.state.y },\n          }\n        : A\n    );\n  };\n\n  const handleParking = (i) => {\n    setIsParking(true);\n    setForManaging({});\n    setSelectedGate(entrancesRef.current[i].state);\n  };\n\n  return (\n    <>\n      <div className={`text-5xl ${isParking && \"filter blur-sm\"} z-50`}>\n        <button\n          title=\"EDIT\"\n          className=\"fixed text-4xl m-3 cursor-pointer z-50\"\n          onClick={() => setEditing(!editing)}\n        >\n          {editing ? <GrClose /> : <FiEdit />}\n        </button>\n\n        <button>\n          <FaTrashAlt\n            className={`${\n              !editing && \"opacity-0 pointer-events-none\"\n            } duration-500 fixed right-0 bottom-0 text-4xl m-5 text-red-400  z-50 cursor-pointer transform hover:scale-125`}\n            onMouseOver={() => setIsDeleting(true)}\n            onMouseLeave={() => setIsDeleting(false)}\n          />\n        </button>\n\n        {entrances.map((entrance, i) => (\n          <Draggable\n            ref={(el) => {\n              entrancesRef.current[i] = el;\n            }}\n            disabled={!editing}\n            key={entrance.id}\n            defaultPosition={entrance.defaultPosition}\n            onStop={() =>\n              setEntrances(\n                updatePosition(entrances, entrance.id, entrancesRef.current[i])\n              )\n            }\n          >\n            <GiGate\n              title=\"ENTRANCE\"\n              onClick={() => (!editing ? handleParking(i) : null)}\n              className={`text-green-400 absolute ${\n                editing ? \"cursor-move\" : \"cursor-pointer\"\n              }`}\n            />\n          </Draggable>\n        ))}\n\n        {parkingSlots.map((slot, i) => (\n          <Draggable\n            ref={(el) => {\n              parkingSlotsRef.current[i] = el;\n            }}\n            key={slot.id}\n            disabled={!editing}\n            defaultPosition={slot.defaultPosition}\n            onStop={(el) =>\n              setParkingSlots(\n                updatePosition(\n                  parkingSlots,\n                  slot.id,\n                  parkingSlotsRef.current[i]\n                )\n              )\n            }\n          >\n            <div\n              title={`${slot.size} parking`}\n              onClick={() =>\n                slot.occupied && !editing\n                  ? setForManaging({ open: true, content: slot })\n                  : null\n              }\n              className={`${slot.occupied && \"bg-green-300 cursor-pointer\"} ${\n                editing && \"cursor-move\"\n              }  h-12 w-12 border-2 border-yellow-200 grid place-content-center absolute text-2xl`}\n            >\n              {slot.size?.charAt(0).toUpperCase()}\n            </div>\n          </Draggable>\n        ))}\n      </div>\n\n      {isParking && (\n        <ParkModal\n          park={handlePark}\n          closeModal={handleCloseModal}\n          car={car}\n          setCar={setCar}\n        />\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}